(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},55886,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(71645),n=e.i(18566),o=e.i(32341);let i=()=>{let e=(0,n.useRouter)(),i=(0,n.useSearchParams)(),{login:s,getRedirectUrl:a}=(0,o.useAuth)(),[l,c]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(()=>{let t=i.get("token"),r=i.get("error");if(r){console.error("Google OAuth error:",r),alert("Authentication failed. Please try again."),e.push("/auth/signin");return}if(!t){console.error("No token received from Google OAuth"),alert("Authentication failed. Please try again."),e.push("/auth/signin");return}try{let e=(e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Error decoding token:",e),null}})(t);if(!e)throw Error("Failed to decode token");let r={name:e.name||e.email||"Google User",email:e.email||"",token:t,tokenExpiry:Date.now()+2592e6};s(r),c(!0),setTimeout(()=>{let e=a();localStorage.removeItem("redirectUrl"),e&&"/auth/signin"!==e&&"/auth/signup"!==e?window.location.href=e:window.location.href="/"},3e3)}catch(t){console.error("Error processing Google OAuth callback:",t),alert("Authentication failed. Please try again."),e.push("/auth/signin")}})()},[e,i,s,a]),l)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Created Successfully!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Welcome to Gold Shop. Redirecting to your destination..."}),(0,t.jsx)("button",{onClick:()=>{let e=a();localStorage.removeItem("redirectUrl"),e&&"/auth/signin"!==e&&"/auth/signup"!==e?window.location.href=e:window.location.href="/"},className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors cursor-pointer",children:"Continue to Destination"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Processing Google authentication..."})]})})};function s(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Processing Google authentication..."})]})}),children:(0,t.jsx)(i,{})})}}]);